<% include ../../partials/header %> 
<script src="../js/ajax.js" type='text/javascript'></script>


<div class='orderpage panel panel-default' id='orderpage'>
    <h2 class='font'>订单管理</h2>
    <hr class='line'>
    <table class='table' id='item-table'>
        <tr><th>商品</th><th>价格</th><th>数量</th><th>总价格</th><th>客户</th><th>邮箱</th><th>支付类型</th><th>状态</th><th>操作</th></tr>
    </table>
</div>

<script>
    var orders = ajax('GET', '/orders', false);
    console.log(orders);


    for(var i=orders.length-1;i>-1;i--){
        var transactions = orders[i].transactions[0].item_list[0].items;
        var payer = orders[i].payer;
        for(var j=0;j<transactions.length;j++){
            editTable(transactions[j], payer);
        }
    }

    function editTable(transactions, payer){
        document.getElementById('item-table').innerHTML += '<tr><td>' + transactions.name + '</td><td>' + transactions.price + '</td><td>' + transactions.quantity + '</td><td>' + transactions.quantity * transactions.price + '</td><td>' + payer.payer_info.first_name + ' ' + payer.payer_info.last_name + '</td><td>' + payer.payer_info.email + '</td><td>' + payer.payment_method + '</td><td>' + payer.status + "</td><td><button id='orderDelete'>删除</button></td></tr>";
    }

</script>

<style>
    .font{
        font-weight: bold;
    }
    .table{
        width: 1325px;
    }
    .line{
        width: 1325px;
        height: 2px;
        background-color: green;
        border: 1px solid;
        margin: 0;
    }

    .orderpage{
        margin: 0 20px 20px 20px;
        overflow-x: auto;
    }
</style>